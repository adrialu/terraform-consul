# All hosts
- hosts: all
  roles:
    - common
    - dotfiles
    - netplan
    - consul

# All consul servers
- hosts: consul
  roles:
    - consul-server

# Set up consul agents on all hosts except for the consul servers
- hosts: all:!consul
  roles:
    - consul-client

# All haproxy servers
- hosts: haproxy
  roles:
    - haproxy

- hosts: web
  roles:
    - webapp
