# All hosts
- hosts: all
  roles:
    - common
    - dotfiles
    - netplan
    - consul

# All consul servers
- hosts: consul
  roles:
    - consul-server

# Set up consul agents on all hosts except for the consul servers
- hosts: all:!consul
  roles:
    - consul-client

# install go on web servers
- hosts: web
  roles:
    - go

# All haproxy servers
- hosts: haproxy
  roles:
    - haproxy

# install the web app on the web servers
- hosts: web
  roles:
    - webapp
